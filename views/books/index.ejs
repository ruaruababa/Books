<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Books</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body class="container-fluid">

    <% if (messages.success) { %>
    <div class="alert alert-success" role="alert"><%- messages.success %></div>
    <% } %>

    <% if (messages.error) { %>
    <div class="alert alert-danger" role="alert"><%- messages.error %></div>
    <% } %>
    <nav class="navbar navbar-light bg-light" style="margin-bottom: 50px;">
        <div class="container-fluid">
            <a href="../books/index">Home Page</a>
        </div>
    </nav>
    <form action="/books/searching" method="post" style="margin-bottom: 20px;">
        <div class="form-group" style="display: flex;">
            <!-- <input id="search" style="width: 50%;"type="text" class="form-control" name="name" autocomplete="off" placeholder="Enter name to searching"> -->
            <input style="width: max-content;" class="form-control me-2" type="search" placeholder="Search"
                aria-label="Search" name="name">
            <div class="form-group">
                <input type="submit" class="btn btn-info" value="Seraching" />
            </div>
        </div>
    </form>
    <div class="card">
        <div class="card-header">
            <ul class="nav nav-pills w-100">
                <li class="nav-pill active">
                    <a class="nav-link">Books</a>
                </li>
                <li class="nav-pill ml-auto">
                    <a class="nav-link active" href="/books/add">Add Book</a>
                    <!-- <a class="nav-link active" href="javascript:window.history.forward()">Back Book</a> -->
                </li>
            </ul>
        </div>
        <div class="card-body">

            <% if(data.length) { %>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Name</th>
                        <th scope="col">Author</th>
                        <th width="250px">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <% for(var i = 0; i< data.length; i++) { %>
                    <tr>
                        <th scope="row"><%= (i+1) %></th>
                        <td><%= data[i].name%></td>
                        <td><%= data[i].author%></td>
                        <td>
                            <a class="btn btn-success detail" href="../books/detail/<%=data[i].id%>">Detail</a>
                            <a class="btn btn-success edit" href="../books/edit/<%=data[i].id%>">Edit</a>
                            <a class="btn btn-danger delete" onclick="return confirm('Are You sure  ?')"
                                href="../books/delete/<%=data[i].id%>">Delete</a>
                        </td>
                    </tr>
                    <% } %>
                </tbody>
            </table>
            <% } %>

            <!-- if result is empty -->
            <% if(!data.length) { %>
            <p class="text-center">No book found!</p>
            <% } %>

        </div>
    </div>
</body>

</html>